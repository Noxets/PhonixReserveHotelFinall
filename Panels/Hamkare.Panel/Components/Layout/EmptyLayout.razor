@using Hamkare.Component.Header
@using MudBlazor.Utilities
@inherits LayoutComponentBase

<HeadContent>
    <HamkareHeader/>
    <HamkareFooter/>
</HeadContent>

<MudRTLProvider RightToLeft="@(Thread.CurrentThread.CurrentUICulture.IsRtl())">

    <MudThemeProvider Theme="_emptyPanelTheme"/>
    <MudPopoverProvider/>
    <MudDialogProvider/>
    <MudSnackbarProvider/>

    <MudLayout>

        <MudMainContent>
            
            <MudContainer MaxWidth="MaxWidth.False" Class="mx-3 mb-4 p-0 w-auto">
                
                <ErrorBoundary @ref="_errorBoundary">
                    @Body
                </ErrorBoundary>
                
            </MudContainer>
            
        </MudMainContent>

    </MudLayout>

</MudRTLProvider>

@code {
    private ErrorBoundary _errorBoundary;

    readonly MudTheme _emptyPanelTheme = new()
    {
        PaletteLight = new PaletteLight
        {
            Background = new MudColor("#f9fafc"),
            AppbarBackground = new MudColor("#f9fafc")
        },
        PaletteDark = new PaletteDark
        {
            Background = new MudColor("#14222b"),
            AppbarBackground = new MudColor("#14222b"),
            Surface = new MudColor("#202c33")
        },
        Typography = new Typography
        {
            Default = new Default
            {
                FontFamily =
                [
                    "panel-fa-Font", "OpenSans", "Arial", "sans-serif"
                ]
            }
        }
    };
    
    protected override void OnParametersSet()
    {
        _errorBoundary?.Recover();
    }
}